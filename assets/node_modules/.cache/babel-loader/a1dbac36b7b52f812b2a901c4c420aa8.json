{"ast":null,"code":"\"use strict\";\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MIME_MAP = [{\n  type: 'text/plain',\n  ext: 'txt'\n}, {\n  type: 'text/html',\n  ext: 'html'\n}, {\n  type: 'text/javascript',\n  ext: 'js'\n}, {\n  type: 'text/css',\n  ext: 'css'\n}, {\n  type: 'text/csv',\n  ext: 'csv'\n}, {\n  type: 'text/yaml',\n  ext: 'yml'\n}, {\n  type: 'text/yaml',\n  ext: 'yaml'\n}, {\n  type: 'text/calendar',\n  ext: 'ics'\n}, {\n  type: 'text/calendar',\n  ext: 'ical'\n}, {\n  type: 'image/png',\n  ext: 'png'\n}, {\n  type: 'image/gif',\n  ext: 'gif'\n}, {\n  type: 'image/jpeg',\n  ext: 'jpg'\n}, {\n  type: 'image/jpeg',\n  ext: 'jpeg'\n}, {\n  type: 'image/bmp',\n  ext: 'bmp'\n}, {\n  type: 'image/x-icon',\n  ext: 'ico'\n}, {\n  type: 'image/tiff',\n  ext: 'tif'\n}, {\n  type: 'image/tiff',\n  ext: 'tiff'\n}, {\n  type: 'image/svg+xml',\n  ext: 'svg'\n}, {\n  type: 'application/json',\n  ext: 'json'\n}, {\n  type: 'application/xml',\n  ext: 'xml'\n}, {\n  type: 'application/x-sh',\n  ext: 'sh'\n}, {\n  type: 'application/zip',\n  ext: 'zip'\n}, {\n  type: 'application/x-rar-compressed',\n  ext: 'rar'\n}, {\n  type: 'application/x-tar',\n  ext: 'tar'\n}, {\n  type: 'application/x-bzip',\n  ext: 'bz'\n}, {\n  type: 'application/x-bzip2',\n  ext: 'bz2'\n}, {\n  type: 'application/pdf',\n  ext: 'pdf'\n}, {\n  type: 'application/java-archive',\n  ext: 'jar'\n}, {\n  type: 'application/msword',\n  ext: 'doc'\n}, {\n  type: 'application/vnd.ms-excel',\n  ext: 'xls'\n}, {\n  type: 'application/vnd.ms-excel',\n  ext: 'xlsx'\n}, {\n  type: 'message/rfc822',\n  ext: 'eml'\n}];\n\nvar JS =\n/** @class */\nfunction () {\n  function JS() {}\n\n  JS.isEmpty = function (obj) {\n    return Object.keys(obj).length === 0;\n  };\n\n  JS.sortByField = function (list, field, dir) {\n    if (!list || !list.sort) {\n      return false;\n    }\n\n    var dirX = dir && dir === 'desc' ? -1 : 1;\n    list.sort(function (a, b) {\n      var a_val = a[field];\n      var b_val = b[field];\n\n      if (typeof b_val === 'undefined') {\n        return typeof a_val === 'undefined' ? 0 : 1 * dirX;\n      }\n\n      if (typeof a_val === 'undefined') {\n        return -1 * dirX;\n      }\n\n      if (a_val < b_val) {\n        return -1 * dirX;\n      }\n\n      if (a_val > b_val) {\n        return 1 * dirX;\n      }\n\n      return 0;\n    });\n    return true;\n  };\n\n  JS.objectLessAttributes = function (obj, less) {\n    var ret = Object.assign({}, obj);\n\n    if (less) {\n      if (typeof less === 'string') {\n        delete ret[less];\n      } else {\n        less.forEach(function (attr) {\n          delete ret[attr];\n        });\n      }\n    }\n\n    return ret;\n  };\n\n  JS.filenameToContentType = function (filename, defVal) {\n    if (defVal === void 0) {\n      defVal = 'application/octet-stream';\n    }\n\n    var name = filename.toLowerCase();\n    var filtered = MIME_MAP.filter(function (mime) {\n      return name.endsWith('.' + mime.ext);\n    });\n    return filtered.length > 0 ? filtered[0].type : defVal;\n  };\n\n  JS.isTextFile = function (contentType) {\n    var type = contentType.toLowerCase();\n\n    if (type.startsWith('text/')) {\n      return true;\n    }\n\n    return 'application/json' === type || 'application/xml' === type || 'application/sh' === type;\n  };\n  /**\n   * generate random string\n   */\n\n\n  JS.generateRandomString = function () {\n    var result = '';\n    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n    for (var i = 32; i > 0; i -= 1) {\n      result += chars[Math.floor(Math.random() * chars.length)];\n    }\n\n    return result;\n  };\n\n  JS.makeQuerablePromise = function (promise) {\n    if (promise.isResolved) return promise;\n    var isPending = true;\n    var isRejected = false;\n    var isFullfilled = false;\n    var result = promise.then(function (data) {\n      isFullfilled = true;\n      isPending = false;\n      return data;\n    }, function (e) {\n      isRejected = true;\n      isPending = false;\n      throw e;\n    });\n\n    result.isFullfilled = function () {\n      return isFullfilled;\n    };\n\n    result.isPending = function () {\n      return isPending;\n    };\n\n    result.isRejected = function () {\n      return isRejected;\n    };\n\n    return result;\n  };\n\n  JS.browserOrNode = function () {\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    var isNode = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n    return {\n      isBrowser: isBrowser,\n      isNode: isNode\n    };\n  };\n  /**\n   * transfer the first letter of the keys to lowercase\n   * @param {Object} obj - the object need to be transferred\n   * @param {Array} whiteListForItself - whitelist itself from being transferred\n   * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n   */\n\n\n  JS.transferKeyToLowerCase = function (obj, whiteListForItself, whiteListForChildren) {\n    if (whiteListForItself === void 0) {\n      whiteListForItself = [];\n    }\n\n    if (whiteListForChildren === void 0) {\n      whiteListForChildren = [];\n    }\n\n    if (!JS.isStrictObject(obj)) return obj;\n    var ret = {};\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        var transferedKey = whiteListForItself.includes(key) ? key : key[0].toLowerCase() + key.slice(1);\n        ret[transferedKey] = whiteListForChildren.includes(key) ? obj[key] : JS.transferKeyToLowerCase(obj[key], whiteListForItself, whiteListForChildren);\n      }\n    }\n\n    return ret;\n  };\n  /**\n   * transfer the first letter of the keys to lowercase\n   * @param {Object} obj - the object need to be transferred\n   * @param {Array} whiteListForItself - whitelist itself from being transferred\n   * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n   */\n\n\n  JS.transferKeyToUpperCase = function (obj, whiteListForItself, whiteListForChildren) {\n    if (whiteListForItself === void 0) {\n      whiteListForItself = [];\n    }\n\n    if (whiteListForChildren === void 0) {\n      whiteListForChildren = [];\n    }\n\n    if (!JS.isStrictObject(obj)) return obj;\n    var ret = {};\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        var transferedKey = whiteListForItself.includes(key) ? key : key[0].toUpperCase() + key.slice(1);\n        ret[transferedKey] = whiteListForChildren.includes(key) ? obj[key] : JS.transferKeyToUpperCase(obj[key], whiteListForItself, whiteListForChildren);\n      }\n    }\n\n    return ret;\n  };\n  /**\n   * Return true if the object is a strict object\n   * which means it's not Array, Function, Number, String, Boolean or Null\n   * @param obj the Object\n   */\n\n\n  JS.isStrictObject = function (obj) {\n    return obj instanceof Object && !(obj instanceof Array) && !(obj instanceof Function) && !(obj instanceof Number) && !(obj instanceof String) && !(obj instanceof Boolean);\n  };\n\n  return JS;\n}();\n\nexports.default = JS;","map":{"version":3,"sources":["../src/JS.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MIME_MAP = [\n    { type: 'text/plain', ext: 'txt' },\n    { type: 'text/html', ext: 'html' },\n    { type: 'text/javascript', ext: 'js' },\n    { type: 'text/css', ext: 'css' },\n    { type: 'text/csv', ext: 'csv' },\n    { type: 'text/yaml', ext: 'yml' },\n    { type: 'text/yaml', ext: 'yaml' },\n    { type: 'text/calendar', ext: 'ics' },\n    { type: 'text/calendar', ext: 'ical' },\n    { type: 'image/png', ext: 'png' },\n    { type: 'image/gif', ext: 'gif' },\n    { type: 'image/jpeg', ext: 'jpg' },\n    { type: 'image/jpeg', ext: 'jpeg' },\n    { type: 'image/bmp', ext: 'bmp' },\n    { type: 'image/x-icon', ext: 'ico' },\n    { type: 'image/tiff', ext: 'tif' },\n    { type: 'image/tiff', ext: 'tiff' },\n    { type: 'image/svg+xml', ext: 'svg' },\n    { type: 'application/json', ext: 'json' },\n    { type: 'application/xml', ext: 'xml' },\n    { type: 'application/x-sh', ext: 'sh' },\n    { type: 'application/zip', ext: 'zip' },\n    { type: 'application/x-rar-compressed', ext: 'rar' },\n    { type: 'application/x-tar', ext: 'tar' },\n    { type: 'application/x-bzip', ext: 'bz' },\n    { type: 'application/x-bzip2', ext: 'bz2' },\n    { type: 'application/pdf', ext: 'pdf' },\n    { type: 'application/java-archive', ext: 'jar' },\n    { type: 'application/msword', ext: 'doc' },\n    { type: 'application/vnd.ms-excel', ext: 'xls' },\n    { type: 'application/vnd.ms-excel', ext: 'xlsx' },\n    { type: 'message/rfc822', ext: 'eml' }\n];\nvar JS = /** @class */ (function () {\n    function JS() {\n    }\n    JS.isEmpty = function (obj) {\n        return Object.keys(obj).length === 0;\n    };\n    JS.sortByField = function (list, field, dir) {\n        if (!list || !list.sort) {\n            return false;\n        }\n        var dirX = (dir && dir === 'desc') ? -1 : 1;\n        list.sort(function (a, b) {\n            var a_val = a[field];\n            var b_val = b[field];\n            if (typeof b_val === 'undefined') {\n                return (typeof a_val === 'undefined') ? 0 : 1 * dirX;\n            }\n            if (typeof a_val === 'undefined') {\n                return -1 * dirX;\n            }\n            if (a_val < b_val) {\n                return -1 * dirX;\n            }\n            if (a_val > b_val) {\n                return 1 * dirX;\n            }\n            return 0;\n        });\n        return true;\n    };\n    JS.objectLessAttributes = function (obj, less) {\n        var ret = Object.assign({}, obj);\n        if (less) {\n            if (typeof less === 'string') {\n                delete ret[less];\n            }\n            else {\n                less.forEach(function (attr) {\n                    delete ret[attr];\n                });\n            }\n        }\n        return ret;\n    };\n    JS.filenameToContentType = function (filename, defVal) {\n        if (defVal === void 0) { defVal = 'application/octet-stream'; }\n        var name = filename.toLowerCase();\n        var filtered = MIME_MAP.filter(function (mime) { return name.endsWith('.' + mime.ext); });\n        return filtered.length > 0 ? filtered[0].type : defVal;\n    };\n    JS.isTextFile = function (contentType) {\n        var type = contentType.toLowerCase();\n        if (type.startsWith('text/')) {\n            return true;\n        }\n        return ('application/json' === type ||\n            'application/xml' === type ||\n            'application/sh' === type);\n    };\n    /**\n     * generate random string\n     */\n    JS.generateRandomString = function () {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = 32; i > 0; i -= 1) {\n            result += chars[Math.floor(Math.random() * chars.length)];\n        }\n        return result;\n    };\n    JS.makeQuerablePromise = function (promise) {\n        if (promise.isResolved)\n            return promise;\n        var isPending = true;\n        var isRejected = false;\n        var isFullfilled = false;\n        var result = promise.then(function (data) {\n            isFullfilled = true;\n            isPending = false;\n            return data;\n        }, function (e) {\n            isRejected = true;\n            isPending = false;\n            throw e;\n        });\n        result.isFullfilled = function () { return isFullfilled; };\n        result.isPending = function () { return isPending; };\n        result.isRejected = function () { return isRejected; };\n        return result;\n    };\n    JS.browserOrNode = function () {\n        var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n        var isNode = typeof process !== 'undefined' &&\n            process.versions != null &&\n            process.versions.node != null;\n        return {\n            isBrowser: isBrowser,\n            isNode: isNode\n        };\n    };\n    /**\n     * transfer the first letter of the keys to lowercase\n     * @param {Object} obj - the object need to be transferred\n     * @param {Array} whiteListForItself - whitelist itself from being transferred\n     * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n     */\n    JS.transferKeyToLowerCase = function (obj, whiteListForItself, whiteListForChildren) {\n        if (whiteListForItself === void 0) { whiteListForItself = []; }\n        if (whiteListForChildren === void 0) { whiteListForChildren = []; }\n        if (!JS.isStrictObject(obj))\n            return obj;\n        var ret = {};\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var transferedKey = whiteListForItself.includes(key) ?\n                    key : key[0].toLowerCase() + key.slice(1);\n                ret[transferedKey] = whiteListForChildren.includes(key) ?\n                    obj[key]\n                    :\n                        JS.transferKeyToLowerCase(obj[key], whiteListForItself, whiteListForChildren);\n            }\n        }\n        return ret;\n    };\n    /**\n     * transfer the first letter of the keys to lowercase\n     * @param {Object} obj - the object need to be transferred\n     * @param {Array} whiteListForItself - whitelist itself from being transferred\n     * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\n     */\n    JS.transferKeyToUpperCase = function (obj, whiteListForItself, whiteListForChildren) {\n        if (whiteListForItself === void 0) { whiteListForItself = []; }\n        if (whiteListForChildren === void 0) { whiteListForChildren = []; }\n        if (!JS.isStrictObject(obj))\n            return obj;\n        var ret = {};\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var transferedKey = whiteListForItself.includes(key) ?\n                    key : key[0].toUpperCase() + key.slice(1);\n                ret[transferedKey] = whiteListForChildren.includes(key) ?\n                    obj[key]\n                    :\n                        JS.transferKeyToUpperCase(obj[key], whiteListForItself, whiteListForChildren);\n            }\n        }\n        return ret;\n    };\n    /**\n     * Return true if the object is a strict object\n     * which means it's not Array, Function, Number, String, Boolean or Null\n     * @param obj the Object\n     */\n    JS.isStrictObject = function (obj) {\n        return ((obj instanceof Object) &&\n            !(obj instanceof Array) &&\n            !(obj instanceof Function) &&\n            !(obj instanceof Number) &&\n            !(obj instanceof String) &&\n            !(obj instanceof Boolean));\n    };\n    return JS;\n}());\nexports.default = JS;\n//# sourceMappingURL=JS.js.map"]},"metadata":{},"sourceType":"script"}