{"ast":null,"code":"import _regeneratorRuntime from \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/src/modules/goal/AddEditGoal.tsx\";\nimport React, { Component } from \"react\";\nimport API from \"@aws-amplify/api\";\nimport { Button, FormGroup, FormControl, Modal, FormLabel, Spinner, Form } from \"react-bootstrap\";\nimport { Redirect } from \"react-router-dom\";\nimport \"./AddEditGoal.css\";\nexport default class AddEditGoal extends Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.validateForm = () => {\n      return this.state.goal.title.length > 0 && this.state.goal.content.length > 0;\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            id = _event$target.id,\n            value = _event$target.value;\n      this.setState({\n        goal: _objectSpread(_objectSpread({}, this.state.goal), {}, {\n          [id]: value\n        })\n      });\n    };\n\n    this.handleCancel = event => {\n      this.setState({\n        redirect: '/'\n      });\n    };\n\n    this.handleSubmit = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                isUpdating: true\n              });\n\n              event.preventDefault();\n              _this.state.isExistingGoal ? _this.updateGoal() : _this.saveGoal();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.updateGoal = () => {\n      const goal = this.state.goal;\n      return API.put(\"goals\", \"/goals/\".concat(this.props.match.params.id), {\n        body: {\n          title: goal.title,\n          content: goal.content\n        }\n      }).then(value => {\n        this.setState({\n          isUpdating: false,\n          redirect: '/'\n        });\n      });\n    };\n\n    this.saveGoal = () => {\n      const goal = this.state.goal;\n      return API.post(\"goals\", \"/goals\", {\n        body: {\n          title: goal.title,\n          content: goal.content\n        }\n      }).then(value => {\n        this.setState({\n          isUpdating: false,\n          redirect: '/'\n        });\n      });\n    };\n\n    this.showDeleteModal = shouldShow => {\n      this.setState({\n        showDeleteModal: shouldShow\n      });\n    };\n\n    this.handleDelete = event => {\n      this.setState({\n        isDeleting: true\n      });\n      return API.del(\"goals\", \"/goals/\".concat(this.props.match.params.id), null).then(value => {\n        this.setState({\n          isDeleting: false,\n          showDeleteModal: false,\n          redirect: '/'\n        });\n      });\n    };\n\n    this.state = {\n      redirect: '',\n      isExistingGoal: false,\n      isLoading: false,\n      isUpdating: false,\n      isDeleting: false,\n      showDeleteModal: false,\n      goal: {\n        goalId: '',\n        title: '',\n        content: ''\n      }\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n\n    if (id) {\n      this.getGoal(id);\n      this.setState({\n        isExistingGoal: true\n      });\n    }\n  }\n\n  getGoal(goalId) {\n    this.setState({\n      isLoading: true\n    });\n    return API.get(\"goals\", \"/goals/\".concat(goalId), null).then(value => {\n      this.setState({\n        isLoading: false,\n        goal: {\n          title: value.title,\n          content: value.content,\n          goalId: this.props.match.params.id\n        }\n      });\n    });\n  }\n\n  deleteModal() {\n    return /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showDeleteModal,\n      onHide: () => this.showDeleteModal(false),\n      container: this,\n      \"aria-labelledby\": \"contained-modal-title\",\n      id: \"contained-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      id: \"contained-modal-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, \"Delete goal\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, \"Are you sure you want to delete this goal?\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"danger\",\n      onClick: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, this.state.isDeleting ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Spinner, {\n      size: \"sm\",\n      animation: \"border\",\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }), \"Deleting\") : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, \"Delete\"))));\n  }\n\n  render() {\n    const _this$state = this.state,\n          goal = _this$state.goal,\n          isExistingGoal = _this$state.isExistingGoal,\n          showDeleteModal = _this$state.showDeleteModal,\n          redirect = _this$state.redirect;\n\n    if (redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        push: true,\n        to: redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"goal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(Spinner, {\n      animation: \"border\",\n      className: \"center-spinner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(Form, {\n      noValidate: true,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"blinking-cursor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, \"Goal title\"), /*#__PURE__*/React.createElement(FormControl, {\n      id: \"title\",\n      onChange: this.handleChange,\n      value: goal.title,\n      minLength: 1,\n      isValid: goal.title.length > 0,\n      placeholder: \"Enter goal title..\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, \"Goal description\"), /*#__PURE__*/React.createElement(FormControl, {\n      id: \"content\",\n      onChange: this.handleChange,\n      value: goal.content,\n      minLength: 1,\n      isValid: goal.content.length > 0,\n      placeholder: \"Enter goal description..\",\n      as: \"textarea\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }))), isExistingGoal && /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-danger\",\n      onClick: () => this.showDeleteModal(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      disabled: !this.validateForm(),\n      className: \"float-right\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }, this.state.isUpdating ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Spinner, {\n      size: \"sm\",\n      animation: \"border\",\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 23\n      }\n    }), isExistingGoal ? 'Updating' : 'Creating') : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }, isExistingGoal ? 'Update goal' : 'Create goal')), /*#__PURE__*/React.createElement(Button, {\n      variant: \"link\",\n      onClick: this.handleCancel,\n      className: \"float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, \"Cancel\")), showDeleteModal && this.deleteModal());\n  }\n\n}","map":{"version":3,"sources":["/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/src/modules/goal/AddEditGoal.tsx"],"names":["React","Component","API","Button","FormGroup","FormControl","Modal","FormLabel","Spinner","Form","Redirect","AddEditGoal","constructor","props","validateForm","state","goal","title","length","content","handleChange","event","target","id","value","setState","handleCancel","redirect","handleSubmit","isUpdating","preventDefault","isExistingGoal","updateGoal","saveGoal","put","match","params","body","then","post","showDeleteModal","shouldShow","handleDelete","isDeleting","del","isLoading","goalId","componentDidMount","getGoal","get","deleteModal","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"@aws-amplify/api\";\nimport { Button, FormGroup, FormControl, Modal, FormLabel, Spinner, Form } from \"react-bootstrap\";\nimport { Redirect } from \"react-router-dom\";\n\nimport \"./AddEditGoal.css\";\n\ninterface AddEditGoalProps {\n  match: any;\n  history: any;\n}\n\ninterface AddEditGoalState {\n  isExistingGoal: boolean;\n  isLoading: boolean;\n  isUpdating: boolean;\n  isDeleting: boolean;\n  goal: Goal;\n  showDeleteModal: boolean;\n  redirect: string;\n}\n\ninterface Goal {\n  goalId: string;\n  title: string;\n  content: string;\n}\n\nexport default class AddEditGoal extends Component<AddEditGoalProps, AddEditGoalState> {\n  constructor(props: AddEditGoalProps) {\n    super(props);\n\n    this.state = {\n      redirect: '',\n      isExistingGoal: false,\n      isLoading: false,\n      isUpdating: false,\n      isDeleting: false,\n      showDeleteModal: false,\n      goal: {\n        goalId: '',\n        title: '',\n        content: '',\n      },\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    if (id) {\n      this.getGoal(id);\n      this.setState({\n        isExistingGoal: true,\n      });\n    }\n\n  }\n\n  getGoal(goalId: string) {\n    this.setState({\n      isLoading: true,\n    });\n\n    return API.get(\"goals\", `/goals/${goalId}`, null).then((value: any) => {\n      this.setState({\n        isLoading: false,\n        goal: {\n          title: value.title,\n          content: value.content,\n          goalId: this.props.match.params.id,\n        }\n      });\n    });\n  }\n\n  validateForm = () => {\n    return this.state.goal.title.length > 0 && this.state.goal.content.length > 0;\n  }\n\n  handleChange = (event: any) => {\n    const { id, value } = event.target;\n    this.setState({\n      goal: {\n        ...this.state.goal,\n        [id]: value\n      }\n    } as any);\n  }\n\n  handleCancel = (event: any) => {\n    this.setState({\n      redirect: '/'\n    });\n  }\n\n  handleSubmit = async (event: any) => {\n    this.setState ({\n      isUpdating: true,\n    });\n    event.preventDefault();\n    this.state.isExistingGoal ? this.updateGoal() : this.saveGoal();\n  }\n\n  updateGoal = () => {\n    const { goal } = this.state;\n    return API.put(\"goals\", `/goals/${this.props.match.params.id}`, {\n      body: {\n        title: goal.title,\n        content: goal.content\n      }\n    }).then((value: any) => {\n      this.setState({\n        isUpdating: false,\n        redirect: '/'\n      });\n    });\n  }\n\n  saveGoal = () => {\n    const { goal } = this.state;\n    return API.post(\"goals\", \"/goals\", {\n      body: {\n        title: goal.title,\n        content: goal.content\n      }\n    }).then((value: any) => {\n      this.setState({\n        isUpdating: false,\n        redirect: '/'\n      });\n    });\n  }\n\n  showDeleteModal = (shouldShow: boolean) => {\n    this.setState({\n      showDeleteModal: shouldShow\n    });\n  }\n\n  handleDelete = (event: any) => {\n    this.setState({\n      isDeleting: true,\n    })\n\n    return API.del(\"goals\", `/goals/${this.props.match.params.id}`, null).then((value: any) => {\n      this.setState({\n        isDeleting: false,\n        showDeleteModal: false,\n        redirect: '/'\n      });\n    });\n\n  }\n\n  deleteModal() {\n    return (\n      <Modal\n        show={this.state.showDeleteModal}\n        onHide={() => this.showDeleteModal(false)}\n        container={this}\n        aria-labelledby=\"contained-modal-title\"\n        id=\"contained-modal\">\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title\">Delete goal</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          Are you sure you want to delete this goal?\n        </Modal.Body>\n        <Modal.Footer>\n          <Button\n            variant=\"danger\"\n            onClick={this.handleDelete}>\n            {this.state.isDeleting ?\n              <span><Spinner size=\"sm\" animation=\"border\" className=\"mr-2\" />Deleting</span> :\n              <span>Delete</span>}\n            </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  render() {\n    const { goal, isExistingGoal, showDeleteModal, redirect } = this.state;\n\n    if (redirect) {\n      return <Redirect push to={redirect} />;\n    }\n\n    return (\n      <div className=\"goal\">\n        {this.state.isLoading ? \n          <Spinner animation=\"border\" className=\"center-spinner\" /> : \n\n          <Form noValidate onSubmit={this.handleSubmit}>\n\n            <div className=\"form-body\">\n              <FormGroup className=\"blinking-cursor\">\n                <FormLabel>Goal title</FormLabel>\n                <FormControl id=\"title\"\n                  onChange={this.handleChange}\n                  value={goal.title}\n                  minLength={1}\n                  isValid={goal.title.length > 0}\n                  placeholder=\"Enter goal title..\"\n                  required />\n              </FormGroup>\n\n              <FormGroup >\n                <FormLabel>Goal description</FormLabel>\n                <FormControl id=\"content\"\n                  onChange={this.handleChange}\n                  value={goal.content}\n                  minLength={1}\n                  isValid={goal.content.length > 0}\n                  placeholder=\"Enter goal description..\"\n                  as=\"textarea\"\n                  required />\n              </FormGroup>\n            </div>\n\n            {isExistingGoal &&\n              <Button\n                variant=\"outline-danger\"\n                onClick={() => this.showDeleteModal(true)}>\n                Delete\n              </Button>}\n\n            <Button\n              variant=\"primary\"\n              type=\"submit\"\n              disabled={!this.validateForm()}\n              className=\"float-right\"\n              onClick={this.handleSubmit}>\n              {this.state.isUpdating ?\n                <span><Spinner size=\"sm\" animation=\"border\" className=\"mr-2\" />{isExistingGoal ? 'Updating' : 'Creating'}</span> :\n                <span>{isExistingGoal ? 'Update goal' : 'Create goal'}</span>}\n            </Button>\n\n            <Button\n              variant=\"link\"\n              onClick={this.handleCancel}\n              className=\"float-right\">\n              Cancel\n            </Button>\n          </Form>}\n\n        {showDeleteModal && this.deleteModal()}\n        \n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}