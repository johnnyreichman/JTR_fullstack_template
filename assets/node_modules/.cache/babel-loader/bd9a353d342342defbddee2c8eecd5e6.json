{"ast":null,"code":"import _regeneratorRuntime from \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/src/App.tsx\";\nimport Auth from \"@aws-amplify/auth\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Form, Nav, Navbar, Button } from \"react-bootstrap\";\nimport \"./App.css\";\nimport { Routes } from \"./Routes\";\n\nclass App extends Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.userHasAuthenticated = authenticated => {\n      this.setState({\n        isAuthenticated: authenticated\n      });\n    };\n\n    this.handleLogout = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Auth.signOut();\n\n          case 2:\n            _this.userHasAuthenticated(false);\n\n            _this.props.history.push(\"/login\");\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    this.showLoggedInBar = () => /*#__PURE__*/React.createElement(Form, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-light\",\n      onClick: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }, \"Log out\"));\n\n    this.showLoggedOutBar = () => /*#__PURE__*/React.createElement(Form, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-light\",\n      href: \"/signup\",\n      className: \"mr-sm-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, \"Sign up\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-light\",\n      href: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, \"Login\"));\n\n    this.state = {\n      isAuthenticated: false,\n      isAuthenticating: true\n    };\n    document.title = \"Goals\";\n  }\n\n  componentDidMount() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Auth.currentSession();\n\n          case 3:\n            if (!_context2.sent) {\n              _context2.next = 5;\n              break;\n            }\n\n            _this2.userHasAuthenticated(true);\n\n          case 5:\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n\n            if (_context2.t0 !== 'No current user') {\n              alert(_context2.t0);\n            }\n\n          case 10:\n            _this2.setState({\n              isAuthenticating: false\n            });\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[0, 7]]);\n    }))();\n  }\n\n  render() {\n    const childProps = {\n      isAuthenticated: this.state.isAuthenticated,\n      userHasAuthenticated: this.userHasAuthenticated\n    };\n    return !this.state.isAuthenticating && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      \"navbar-light\": \"true\",\n      className: \"mb-3 navbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, \"AWS Full-Stack Template\"), /*#__PURE__*/React.createElement(Navbar.Toggle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      className: \"ml-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, this.state.isAuthenticated ? this.showLoggedInBar() : this.showLoggedOutBar()))), /*#__PURE__*/React.createElement(Routes, {\n      isAuthenticated: childProps.isAuthenticated,\n      userHasAuthenticated: childProps.userHasAuthenticated,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/JohnnyReichman/Documents/independent_work/fullstack_template/JTR_fullstack_template/assets/src/App.tsx"],"names":["Auth","React","Component","withRouter","Form","Nav","Navbar","Button","Routes","App","constructor","props","userHasAuthenticated","authenticated","setState","isAuthenticated","handleLogout","signOut","history","push","showLoggedInBar","showLoggedOutBar","state","isAuthenticating","document","title","componentDidMount","currentSession","alert","render","childProps"],"mappings":"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","sourcesContent":["import Auth from \"@aws-amplify/auth\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Form, Nav, Navbar, Button } from \"react-bootstrap\";\nimport \"./App.css\";\nimport { Routes } from \"./Routes\";\n\ninterface AppProps {\n  history: any;\n}\n\ninterface AppState {\n  isAuthenticated: boolean;\n  isAuthenticating: boolean;\n}\n\nclass App extends Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n\n    this.state = {\n      isAuthenticated: false,\n      isAuthenticating: true\n    };\n\n    document.title = \"Goals\"\n  }\n\n  async componentDidMount() {\n    try {\n      if (await Auth.currentSession()) {\n        this.userHasAuthenticated(true);\n      }\n    }\n    catch (e) {\n      if (e !== 'No current user') {\n        alert(e);\n      }\n    }\n\n    this.setState({ isAuthenticating: false });\n  }\n\n  userHasAuthenticated = (authenticated: boolean) => {\n    this.setState({ isAuthenticated: authenticated });\n  }\n\n  handleLogout = async () => {\n    await Auth.signOut();\n\n    this.userHasAuthenticated(false);\n    this.props.history.push(\"/login\");\n  }\n\n  showLoggedInBar = () => (\n    <Form inline>\n      <Button variant=\"outline-light\" onClick={this.handleLogout}>Log out</Button>\n    </Form>\n  );\n\n  showLoggedOutBar = () => (\n    <Form inline>\n      <Button variant=\"outline-light\" href=\"/signup\" className=\"mr-sm-2\">Sign up</Button>\n      <Button variant=\"outline-light\" href=\"/login\">Login</Button>\n    </Form>\n  );\n\n  render() {\n    const childProps = {\n      isAuthenticated: this.state.isAuthenticated,\n      userHasAuthenticated: this.userHasAuthenticated\n    };\n\n    return (\n      !this.state.isAuthenticating &&\n      <div className=\"App container\">\n        <Navbar navbar-light=\"true\" className=\"mb-3 navbar\">\n          <Navbar.Brand href=\"/\">AWS Full-Stack Template</Navbar.Brand>\n          <Navbar.Toggle />\n          <Navbar.Collapse>\n            <Nav className=\"ml-auto\">\n              {this.state.isAuthenticated ? this.showLoggedInBar() : this.showLoggedOutBar()}\n            </Nav>\n          </Navbar.Collapse>\n        </Navbar>\n        <Routes isAuthenticated={childProps.isAuthenticated} userHasAuthenticated={childProps.userHasAuthenticated} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App as any);"]},"metadata":{},"sourceType":"module"}